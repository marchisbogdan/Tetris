{"version":3,"sources":["script.js"],"names":[],"mappings":"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","file":"babelScript.js","sourcesContent":["(function() {\r\n\tvar startButton = document.getElementById('start');\r\n\tstartButton.addEventListener('click', start);\r\n\tvar stopButton = document.getElementById('stop');\r\n\tstopButton.addEventListener('click', stop);\r\n\t// adding the event for key press\r\n\tdocument.addEventListener('keydown', changeDirection);\r\n\tgenMatrix();\r\n})();\r\n\r\nvar play = true,\r\n\tDIR = { left: -1, down: 0, right: 1 },\r\n\r\n\r\n\t// directions\r\n\txAxis = { back: 1, default: 0 },\r\n\r\n\r\n\t// values for verical movement\r\n\tintervalTime = 800,\r\n\r\n\r\n\t// the period of time for an interval function call\r\n\r\n\tblock,\r\n\r\n\r\n\t// the current moving block\r\n\tmovingBlock,\r\n\r\n\r\n\t// for the repositioning the block after a certain time interval\r\n\r\n\t// used to trace the block, (using indexes to identify the right position easier)\r\n\tstartingRow = 1,\r\n\tstartingColl = 6,\r\n\tcurrentRow = 1,\r\n\tcurrentColl = 6,\r\n\tlastRow = 1,\r\n\tlastColl = 6,\r\n\tnextRow = 2,\r\n\tnextColl = 6,\r\n\r\n\r\n\t// positions in the matrix\r\n\tlastX = 6,\r\n\tlastY = 1,\r\n\tstartingPoz = document.getElementsByClassName('coll-' + startingColl)[0],\r\n\r\n\r\n\t// this is a column in the first row of the table\r\n\tlastPoz,\r\n\r\n\r\n\t// the last position of the moving block\r\n\tnextAvailableCell,\r\n\r\n\r\n\t// the next available cell for the moving block\r\n\tlastOccupiedCell,\r\n\r\n\r\n\t// the last occupied cell for the moving block\r\n\t// global vars\r\n\tmaxRow = 15,\r\n\tmaxColl = 10,\r\n\tminColl = 1,\r\n\tmatrix = [],\r\n\tscore = 0,\r\n\r\n\r\n\t// colors for the blocks background\r\n\tcolors = ['#be0000', '#becf00', '#2cbe00', '#001ebe', '#be009a']; // the colors of the moving block\r\n\r\nfunction genMatrix() {\r\n\tvar i, j;\r\n\tfor(i = 1; i <= maxRow; i++) {\r\n\t\tmatrix[i] = [];\r\n\t\tfor(j = 1; j <= maxColl; j++) {\r\n\t\t\tmatrix[i][j] = 0;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction start() {\r\n\tplay = true;\r\n\tif(matrix.length === 0) {\r\n\t\tgenMatrix();\r\n\t}\r\n\tcheckForFullRow();\r\n\tblock = generateBlock();\r\n\traiseScore();\r\n\tshowScore();\r\n\tmovingBlock = setInterval(reposition, intervalTime);\r\n}\r\n\r\nfunction stop() {\r\n\tplay = false;\r\n\tlastY += 1;\r\n\tlowerScore();\r\n\tdeleteLastPosition();\r\n\talert(\"Game stoped!\");\r\n}\r\n\r\n/*\r\n\tThe function creates a block, and sets a color to the block before appending\r\n\tit to the starting position of the board\r\n*/\r\nfunction generateBlock() {\r\n\tvar blockGen = document.createElement('div');\r\n\tblockGen.className = 'active-block';\r\n\tblockGen.style.background = generateBackgroundColor();\r\n\tstartingPoz.appendChild(blockGen);\r\n\tnextAvailableCell = getnextAvailableCell(DIR.down, xAxis.default);\r\n\r\n\tsetThePositions(startingRow, startingColl, startingRow, startingColl);\r\n\r\n\treturn blockGen;\r\n}\r\n\r\n/*\r\n\tthe function starts when a key is pressed and it directs a particular event to a coresponding case\r\n*/\r\nfunction changeDirection(event) {\r\n\tevent = event || window.event;\r\n\t//clearInterval(movingBlock);\r\n\tif(event.keyCode == '37') {\r\n\t\t// left arrow\r\n\t\tif(verifyVacancy(DIR.left, xAxis.back)) {\r\n\t\t\ttry {\r\n\t\t\t\tmoveTo(block, DIR.left, xAxis.back);\r\n\t\t\t\tsetThePositions(currentRow, currentColl, nextRow - xAxis.back, nextColl + DIR.left, nextRow, nextColl + DIR.left);\r\n\t\t\t} catch(err) {\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t}\r\n\t\t\tdeleteLastPosition();\r\n\t\t}\r\n\t} else if(event.keyCode == '39') {\r\n\t\t// right arrow\r\n\t\tif(verifyVacancy(DIR.right, xAxis.back)) {\r\n\t\t\ttry {\r\n\t\t\t\tmoveTo(block, DIR.right, xAxis.back);\r\n\t\t\t\tsetThePositions(currentRow, currentColl, nextRow - xAxis.back, nextColl + DIR.right, nextRow, nextColl + DIR.right);\r\n\t\t\t} catch(err) {\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t}\r\n\t\t\tdeleteLastPosition();\r\n\t\t}\r\n\t} else if(event.keyCode == '40') {\r\n\t\t// down arrow\r\n\t\tif(verifyVacancy(DIR.down, xAxis.default)) {\r\n\t\t\ttry {\r\n\t\t\t\tmoveTo(block, DIR.down, xAxis.default);\r\n\t\t\t\tsetThePositions(currentRow, currentColl, nextRow - xAxis.default, nextColl + DIR.down);\r\n\t\t\t} catch(err) {\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t}\r\n\t\t\tdeleteLastPosition();\r\n\t\t}\r\n\t}\r\n}\r\n/*\r\n\tif there is an available position next the function will reposition the block,\r\n\totherwise it will clear the last position and create a new block from the beginning\r\n*/\r\nfunction reposition() {\r\n\r\n\tif(play && isGameOver() === true) {\r\n\t\tif(verifyVacancy(DIR.down, xAxis.default)) {\r\n\t\t\ttry {\r\n\t\t\t\tmoveTo(block, DIR.down, xAxis.default);\r\n\t\t\t\tsetThePositions(currentRow, currentColl, nextRow - xAxis.default, nextColl + DIR.down);\r\n\t\t\t} catch(err) {\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t}\r\n\t\t\tdeleteLastPosition();\r\n\t\t} else {\r\n\t\t\tblock.className = 'positioned-block';\r\n\t\t\tmatrix[currentRow][currentColl] = 1;\r\n\t\t\tresetPositions();\r\n\t\t\tclearInterval(movingBlock);\r\n\t\t\tstart();\r\n\t\t}\r\n\t} else {\r\n\t\tclearInterval(movingBlock);\r\n\t\tplay = true;\r\n\t}\r\n}\r\n\r\n// verify if the next position in a certain direction is open\r\nfunction verifyVacancy(direction, goBack) {\r\n\tif(currentRow < maxRow && currentColl + direction >= minColl && currentColl + direction <= maxColl) {\r\n\t\tif(isPositionOpen(direction, goBack)) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\treturn false;\r\n}\r\n/*\r\n moves the element to a specified direction\r\n @currentBlock - the last elment genereted.\r\n @direction - specifies the direction of the block\r\n @goBack - specifies the number of rows rows to which a block is set back\r\n*/\r\nfunction moveTo(currentBlock, direction, goBack) {\r\n\tif(typeof currentBlock === 'undefined' || currentBlock === null) {\r\n\t\tthrow new Error(\"Block is not defined!\");\r\n\t}\r\n\tif(typeof direction === 'undefined' || direction === null) {\r\n\t\tthrow new Error(\"The direction isn't specified!\");\r\n\t}\r\n\tif(typeof goBack === 'undefined' || goBack === null) {\r\n\t\tgoBack = 0;\r\n\t}\r\n\tvar newBlock = document.createElement('div');\r\n\tnewBlock.className = 'active-block';\r\n\tnewBlock.style.background = block.style.background;\r\n\r\n\t// set a trace in the matrix\r\n\tmatrix[currentRow][currentColl] = 2;\r\n\tlastX = currentColl;\r\n\tlastY = currentRow;\r\n\tnextAvailableCell = getnextAvailableCell(direction, goBack);\r\n\t//lastOccupiedCell = getnextAvailableCell(direction, goBack);\r\n\r\n\tnextAvailableCell.appendChild(newBlock);\r\n}\r\n\r\n// this function removes the first child element from a specified position of the table.\r\n// used to delete the last position of the block.\r\nfunction deleteLastPosition() {\r\n\t//delete the trace of the block in the matrix\r\n\tmatrix[lastY][lastX] = 0;\r\n\tvar parent = document.getElementsByClassName('coll-' + lastX)[lastY - 1];\r\n\tparent.removeChild(parent.children[0]);\r\n}\r\n/*\r\n \tfunction checks if a targeted position is empty\r\n \t@direction - specifies the direction of the block\r\n \t@goBack - specifies if the block should go back one row\r\n*/\r\nfunction isPositionOpen(direction, goBack) {\r\n\tif(matrix[nextRow][nextColl + direction] === 0) {\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}\r\n\r\n/* setting the global variables for the blocks position*/\r\nfunction setThePositions(currentR, currentC, nextR, nextC, incrNextRow, incrNextColl) {\r\n\tif(currentR && currentC && currentR !== null && currentC !== null) {\r\n\t\tlastRow = currentR;\r\n\t\tlastColl = currentC;\r\n\t}\r\n\tif(nextR && nextC && nextR !== null && nextC !== null) {\r\n\t\tcurrentRow = nextR;\r\n\t\tcurrentColl = nextC;\r\n\t}\r\n\tif(incrNextRow && incrNextColl && incrNextRow !== null && incrNextColl !== null) {\r\n\t\tnextRow = incrNextRow;\r\n\t\tnextColl = incrNextColl;\r\n\t} else {\r\n\t\tnextRow = currentRow + 1;\r\n\t\tnextColl = currentColl;\r\n\t}\r\n}\r\n\r\n/*\r\n  returns an td element which represents the next position\r\n  @direction - specifies the direction of the block\r\n  @goBack - specifies if the block should go back one row\r\n*/\r\nfunction getnextAvailableCell(direction, goBack) {\r\n\tif(typeof direction === 'undefined' || direction === null) {\r\n\t\tdirection = 0;\r\n\t}\r\n\tif(typeof goBack === 'undefined' || goBack === null) {\r\n\t\tgoBack = 0;\r\n\t}\r\n\treturn document.getElementsByClassName('coll-' + (nextColl + direction))[nextRow - goBack - 1];\r\n}\r\n\r\n/*\r\n  generate a index which will point to a specific position in an array with hex colors as strings\r\n*/\r\nfunction generateBackgroundColor() {\r\n\tvar color,\r\n\t\trandNr = randomNumber(0, 4);\r\n\tcolor = colors[randNr];\r\n\treturn color;\r\n}\r\n\r\n/* resets the positions to the initial values */\r\nfunction resetPositions() {\r\n\tcurrentRow = startingRow;\r\n\tcurrentColl = startingColl;\r\n\tlastRow = startingRow;\r\n\tlastColl = startingColl;\r\n\tnextRow = startingRow + 1;\r\n\tnextColl = startingColl;\r\n}\r\n\r\n// the function checks if the game is over\r\nfunction isGameOver() {\r\n\tfor(var i = minColl; i <= maxColl; i++) {\r\n\t\tif(matrix[1][i] === 1) {\r\n\t\t\tupdateBestScore();\r\n\t\t\talert(\"Game Over\");\r\n\t\t\tdetachEvents();\r\n\t\t\tplay = false;\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\treturn true;\r\n}\r\n\r\n// checks if the last row is full\r\nfunction checkForFullRow() {\r\n\tvar full = true;\r\n\tfor(var i = minColl; i <= maxColl; i++) {\r\n\t\tif(matrix[maxRow][i] !== 1) full = false;\r\n\t}\r\n\tif(full) {\r\n\t\tclearLastRow();\r\n\t\trepositionBlocks();\r\n\t}\r\n}\r\n\r\n// clears the last row\r\n// triggered if the last row is full\r\nfunction clearLastRow() {\r\n\t//clear matrix last row\r\n\tfor(var i = minColl; i <= maxColl; i++) {\r\n\t\tmatrix[maxRow][i] = 0;\r\n\t}\r\n\t//clear DOM table last row\r\n\tvar theLastRow = document.getElementsByClassName('rows')[maxRow - 1];\r\n\tfor(var j = minColl - 1; j < maxColl; j++) {\r\n\t\tvar td = theLastRow.children[j];\r\n\t\ttd.removeChild(td.children[0]);\r\n\t}\r\n}\r\n\r\n// reposition all the blocks with one position lower after clearing the last row\r\nfunction repositionBlocks() {\r\n\tvar sourceRow, destRow, sourceColl, destColl;\r\n\tfor(var i = maxRow - 2; i >= 1; i--) {\r\n\t\tsourceRow = document.getElementsByClassName('rows')[i];\r\n\t\tdestRow = document.getElementsByClassName('rows')[i + 1];\r\n\t\tfor(var j = minColl - 1; j < maxColl; j++) {\r\n\t\t\tsourceColl = sourceRow.children[j];\r\n\t\t\tif(sourceColl.children.length > 0) {\r\n\t\t\t\t// modify the matrix\r\n\t\t\t\tmatrix[i + 2][j + 1] = 1;\r\n\t\t\t\t// append the block from the upper element to the one positioned lower\r\n\t\t\t\tdestColl = destRow.children[j];\r\n\t\t\t\tdestColl.appendChild(sourceColl.children[0]);\r\n\t\t\t\t// modify the matrix\r\n\t\t\t\tmatrix[i + 1][j + 1] = 0;\r\n\t\t\t} else {\r\n\t\t\t\t// modify the matrix\r\n\t\t\t\tmatrix[i + 2][j + 1] = 0;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n/*\r\n\tThis function rises the score of the game.\r\n*/\r\nfunction raiseScore() {\r\n\tscore += 1;\r\n}\r\n\r\n/*\r\nThis function rises the score of the game.\r\n*/\r\nfunction lowerScore() {\r\n\tscore -= 1;\r\n}\r\n\r\n/*\r\n\tThis function verifies if there is a best score and updates it if the current\r\n\tscore is higher then the best one.\r\n*/\r\nfunction updateBestScore() {\r\n\tif(typeof(Storage) !== 'undefined') {\r\n\t\tlet bestScoreContainer = document.getElementsByClassName('score__best')[0];\r\n\t\tlet bestValue = parseInt(localStorage.bestScore);\r\n\t\tif(!isNaN(bestValue) && score > bestValue) {\r\n\t\t\tlocalStorage.bestScore = score;\r\n\t\t\talert(\"New Record:\" + score + \" points!\");\r\n\t\t}\r\n\t} else {\r\n\t\talert(\"Your browser doesn't support Web Storage.\")\r\n\t}\r\n}\r\n\r\n/*\r\n\tThis function interacts with the DOM and inserts the specific values\r\n\tfor the current score and the best one.\r\n*/\r\nfunction showScore() {\r\n\tlet scoreContainer = document.getElementsByClassName('score__current')[0];\r\n\tlet bestScoreContainer = document.getElementsByClassName('score__best')[0];\r\n\r\n\tscoreContainer.innerHTML = \"Score:\" + score;\r\n\tif(!localStorage.bestScore) {\r\n\t\tlocalStorage.bestScore = 0;\r\n\t}\r\n\tbestScoreContainer.innerHTML = \"Best Score:\" + localStorage.bestScore;\r\n}\r\n\r\nfunction randomNumber(minVal, maxVal) {\r\n\treturn Math.floor(Math.random() * (maxVal - minVal + 1) + minVal);\r\n}\r\n\r\nfunction detachEvents() {\r\n\tdocument.getElementById('start').removeEventListener('click', start);\r\n\tdocument.getElementById('stop').removeEventListener('click', stop);\r\n\tdocument.removeEventListener('keydown', changeDirection);\r\n}\r\n//# sourceMappingURL=script.js.map\r\n//# sourceMappingURL=script.js.map\r\n//# sourceMappingURL=script.js.map\r\n"],"sourceRoot":"/source/"}